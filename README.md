# Netflix

## Расчет целевой аудитории

| Целевая аудитория                                 | Мир       |
|---------------------------------------------------|-----------|
| Размер ЦА (без учета нелегальных юзеров)          | 220 млн   |
| Размер ЦА (с учетом нелегальных юзеров)           | ~ 300 млн |
| Количество посетителей в сутки                    | 51.2 млн  |
| Используемые данные подписчиком в час (в среднем) | 3 Гб      |
| Среднее время просмотра                           | 3.2 часа  |

Источник: https://www.comparitech.com/blog/vpn-privacy/netflix-statistics-facts-figures/


| Распределение аудитории по миру               |
|-----------------------------------|-----------|
| Соединенные Штаты Америки         | 74.58 млн |
| Европа, Центральная Азия, Африка  | 73.73 млн |
| Латинская Америка                 | 39.61 млн |
| Азиатско-Тихоокеанский регион     | 33.72 млн |

Источник: https://www.demandsage.com/netflix-subscribers/ 

## Расчет нагрузки

Ежедневно Netflix посещают 51.2 млн человек. Учитывая среднее время просмотра (3.2 часа), ежедневно на Netflix просматривают 164.8 млн часов.

| Средний вес 1 часа видео  | Гб  |
|---------------------------|-----|
| FullHD                    | 1.5 |
| 2K                        | 3   |
| 4K                        | 7   |

Исходя из среднего веса 1 часа видео и учетом того, что современные экраны устройств имеют высокое разрешение, а также то, что Netflix предоставляет свои фильмы в 4К разрешении, примем средний вес 1 часа - 3 Гб.
### Таким образом ежедневная нагрузка на сервис составит 494.4 млн Гб трафика = 471,5 Пб

Загрузка статики: главная страница Netflix ориентировочно весит 3 Мб, страница с поиском - 2 Мб (2 запроса от одного пользователя), страница с подборками - 4 Мб, а страница с профилем - 2 Мб. Предположим, что каждый юзер будет заходить на все эти страницы каждый день. Загрузка будет происходить 1 раз, после чего данные о страницах будут храниться в кэше пользователя. Таким образом, ежедневно будет скачиваться: 51,2 * (3+2+4+4) = 665.6 млн Мб данных = 634.8 Тб 

Расчитаем нагрузку в пиковые часы. Наиболее нагруженным временем работы Netflix считается 21:00 в США. В это время заходит 50% от общего числа пользователей в день. Рассмотрим ситуацию выпуска новой серии популярного сериала в это время. В таком случае к сервису может подключиться ещё 20% пользователей относительно ежедневного траффика. Таким образом расчетная пиковая нагрузка составит 70% от ежедневного числа пользователей, что составит 35.84 млн пользователей.

| Требуемая скорость для скачивания видео  | Мбит/с  |
|------------------------------------------|---------|
| FullHD                                   | 5-8     |
| 2K                                       | 25      |
| 4K                                       | 45      |

Для расчетов будем использовать среднюю скорость подключения в 18 Мбит/с. Таким образом, общая скорость по сети должна составлять 645.12 млн Мбит/с = 615 Тбит/с

Для расчета RPS предположим, что в среднем каждый пользователь посещает 5 уникальных ссылок со статикой (как в расчете на статику) и ещё 10 запросов без загрузки статики. Получаем RPS на бэкенд = 51.2 * 1 000 000 * 15 / (24 * 60 * 60) = 8888.8 RPS

Для расчета пикового RPS на бэкенд предположим, что 70% пользователей за 1 час совершили по 5 запросов 
35.84 * 1 000 000 * 5 / (60 * 60) = 49777.8 RPS
